(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{299:function(t,e,s){"use strict";s.r(e);var a=s(14),n=Object(a.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"urbanopt-reopt-gem"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#urbanopt-reopt-gem"}},[t._v("#")]),t._v(" URBANopt REopt Gem")]),t._v(" "),e("h3",{attrs:{id:"rdocs"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rdocs"}},[t._v("#")]),t._v(" "),e("StaticLink",{attrs:{target:"\\_blank",href:"rdoc/"}},[t._v("Rdocs")])],1),t._v(" "),e("p",[t._v("The "),e("strong",[t._v("URBANopt"),e("sup",[t._v("â„¢")]),t._v(" REopt Gem")]),t._v(" extends a "),e("strong",[t._v("URBANopt::Reporting::DefaultReports::ScenarioReport")]),t._v(" and "),e("strong",[t._v("URBANopt::Reporting::DefaultReports::FeatureReport")]),t._v(" with the ability to derive cost-optimal distributed energy resource (DER) technology sizes and annual dispatch strageties via the "),e("StaticLink",{attrs:{target:"\\_blank",href:"https://reopt.nrel.gov/tool"}},[t._v("REopt Lite")]),t._v(" decision support platform.\nREopt Lite is a technoeconomic model which leverages mixed integer linear programming to identify the cost-optimal sizing of solar PV, Wind, Storage and/or diesel generation given an electric load profile, a utility rate tariff and other technoeconomic parameters. See "),e("StaticLink",{attrs:{target:"\\_blank",href:"https://developer.nrel.gov/docs/energy-optimization/reopt/v2/"}},[t._v("https://developer.nrel.gov/docs/energy-optimization/reopt/v2/")]),t._v(" for more detailed information on input parameters and default assumptions.")],1),t._v(" "),e("p",[t._v("The REopt Gem accomplishes three basic functions (described more below in the "),e("em",[t._v("Functionality")]),t._v(" section):")]),t._v(" "),e("ol",[e("li",[t._v("Accepts a json (or hash) of "),e("strong",[t._v("assumptions")]),t._v(" (i.e. utility rate, installation costs, escalation rates) to use in running REopt for a Scenario or Feature Report")]),t._v(" "),e("li",[t._v("Updates the "),e("strong",[t._v("distributed_generation")]),t._v(" attributes of a Feature Report or Scenario Report based on a cost-optimal DER system")]),t._v(" "),e("li",[t._v("Updates the "),e("strong",[t._v("timeseries_CSV")]),t._v(" attributes of a Feature Report or Scenario Report based on the dispatch of a cost-optimal DER system")])]),t._v(" "),e("p",[t._v("Moreover, the REopt Gem can be run in several modes, either on:")]),t._v(" "),e("ul",[e("li",[t._v("A Feature Report,")]),t._v(" "),e("li",[t._v("A collection of Feature Reports")]),t._v(" "),e("li",[t._v("All the features in a Scenario Report before aggregating results at the scenario level")]),t._v(" "),e("li",[t._v("The collection of features in aggregate as summarized in a Scenario Report")])]),t._v(" "),e("p",[t._v("See the "),e("StaticLink",{attrs:{target:"\\_blank",href:"https://github.com/urbanopt/urbanopt-example-reopt-project.git"}},[t._v("example project")]),t._v(" for more infomation about usage of this gem.")],1),t._v(" "),e("p",[e("b",[t._v("Note:")]),t._v(" This module requires an API Key from the "),e("StaticLink",{attrs:{target:"blank",href:"https://developer.nrel.gov/"}},[t._v("NREL Developer Network")]),t._v(".")],1),t._v(" "),e("StaticLink",{attrs:{target:"\\_blank",href:"https://urbanopt.github.io/urbanopt-reopt-gem/"}},[t._v("RDoc Documentation")]),t._v(" "),e("h2",{attrs:{id:"installation"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#installation"}},[t._v("#")]),t._v(" Installation")]),t._v(" "),e("p",[t._v("See "),e("a",{attrs:{href:"https://docs.urbanopt.net/installation/installation.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://docs.urbanopt.net/installation/installation.html"),e("OutboundLink")],1),t._v(" for instructions on prerequiste software, including:")]),t._v(" "),e("ul",[e("li",[t._v("Ruby 2.2.6")]),t._v(" "),e("li",[t._v("Bundler 1.17.0")]),t._v(" "),e("li",[t._v("OpenStudio 2.8.1")])]),t._v(" "),e("p",[t._v("Add this line to your application's Gemfile:")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[t._v("gem "),e("span",{pre:!0,attrs:{class:"token string-literal"}},[e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'urbanopt-reopt'")])]),t._v("\n")])])]),e("p",[t._v("And then execute:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v("$ bundle install\n$ bundle update\n")])])]),e("p",[t._v("Or install it yourself as:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v("$ gem install 'urbanopt-reopt'\n")])])]),e("h2",{attrs:{id:"functionality"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#functionality"}},[t._v("#")]),t._v(" Functionality")]),t._v(" "),e("p",[t._v("This gem is used to call the REopt Lite API on a Scenario Report or Feature Report to update the object's Distributed Generation attributes (including system financial and sizing metrics) as shown in an example below:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('\t"distributed_generation": {\n\t      "lcc_us_dollars": 100000000.0,\n\t      "npv_us_dollars": 10000000.0,\n\t      "year_one_energy_cost_us_dollars": 7000000.0,\n\t      "year_one_demand_cost_us_dollars": 3000000.0,\n\t      "year_one_bill_us_dollars": 10000000.0,\n\t      "total_energy_cost_us_dollars": 70000000.0,\n\t      "solar_pv": {\n\t        "size_kw": 30000.0\n\t      },\n\t      "wind": {\n\t        "size_kw": 0.0\n\t      },\n\t      "generator": {\n\t        "size_kw": 0.0\n\t      },\n\t      "storage": {\n\t        "size_kw": 2000.0,\n\t        "size_kwh": 5000.0\n\t      }\n\t    }\n')])])]),e("p",[t._v("Moreover, the following optimal dispatch fields are added to its timeseries CSV. Where no system component is recommended the dispatch will be all zero (i.e. if no solar PV is recommended ElectricityProduced:PV:Total will be always be zero)")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("output")]),t._v(" "),e("th",[t._v("unit")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("ElectricityProduced:Total")]),t._v(" "),e("td",[t._v("kWh")])]),t._v(" "),e("tr",[e("td",[t._v("Electricity:Load:Total")]),t._v(" "),e("td",[t._v("kWh")])]),t._v(" "),e("tr",[e("td",[t._v("Electricity:Grid:ToLoad")]),t._v(" "),e("td",[t._v("kWh")])]),t._v(" "),e("tr",[e("td",[t._v("Electricity:Grid:ToBattery")]),t._v(" "),e("td",[t._v("kWh")])]),t._v(" "),e("tr",[e("td",[t._v("Electricity:Storage:ToLoad")]),t._v(" "),e("td",[t._v("kWh")])]),t._v(" "),e("tr",[e("td",[t._v("Electricity:Storage:ToGrid")]),t._v(" "),e("td",[t._v("kWh")])]),t._v(" "),e("tr",[e("td",[t._v("Electricity:Storage:StateOfCharge")]),t._v(" "),e("td",[t._v("kWh")])]),t._v(" "),e("tr",[e("td",[t._v("ElectricityProduced:Generator:Total")]),t._v(" "),e("td",[t._v("kWh")])]),t._v(" "),e("tr",[e("td",[t._v("ElectricityProduced:Generator:ToBattery")]),t._v(" "),e("td",[t._v("kWh")])]),t._v(" "),e("tr",[e("td",[t._v("ElectricityProduced:Generator:ToLoad")]),t._v(" "),e("td",[t._v("kWh")])]),t._v(" "),e("tr",[e("td",[t._v("ElectricityProduced:Generator:ToGrid")]),t._v(" "),e("td",[t._v("kWh")])]),t._v(" "),e("tr",[e("td",[t._v("ElectricityProduced:PV:Total")]),t._v(" "),e("td",[t._v("kWh")])]),t._v(" "),e("tr",[e("td",[t._v("ElectricityProduced:PV:ToBattery")]),t._v(" "),e("td",[t._v("kWh")])]),t._v(" "),e("tr",[e("td",[t._v("ElectricityProduced:PV:ToLoad")]),t._v(" "),e("td",[t._v("kWh")])]),t._v(" "),e("tr",[e("td",[t._v("ElectricityProduced:PV:ToGrid")]),t._v(" "),e("td",[t._v("kWh")])]),t._v(" "),e("tr",[e("td",[t._v("ElectricityProduced:Wind:Total")]),t._v(" "),e("td",[t._v("kWh")])]),t._v(" "),e("tr",[e("td",[t._v("ElectricityProduced:Wind:ToBattery")]),t._v(" "),e("td",[t._v("kWh")])]),t._v(" "),e("tr",[e("td",[t._v("ElectricityProduced:Wind:ToLoad")]),t._v(" "),e("td",[t._v("kWh")])]),t._v(" "),e("tr",[e("td",[t._v("ElectricityProduced:Wind:ToGrid")]),t._v(" "),e("td",[t._v("kWh")])])])]),t._v(" "),e("p",[t._v("The REopt Lite has default values for all non-required input parameters that are used unless the user specifies custom assumptions. See "),e("StaticLink",{attrs:{target:"\\_blank",href:"https://developer.nrel.gov/docs/energy-optimization/reopt/v2/"}},[t._v("https://developer.nrel.gov/docs/energy-optimization/reopt/v2/")]),t._v(" for more detailed information on input parameters and default assumptions.")],1),t._v(" "),e("p",[e("b",[t._v("Note:")]),t._v(" Required attributes for a REopt run include latitude and longitude, parsed from the Feature or Scenario Report attributes. If no utility rate is specified in your assumptions, then a constant rate of $0.13 is assumed without demand charges. Also, by default, only solar PV and storage are considered in the analysis (i.e. Wind and Generators are excluded from consideration).")]),t._v(" "),e("h2",{attrs:{id:"getting-started"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#getting-started"}},[t._v("#")]),t._v(" Getting Started")]),t._v(" "),e("p",[t._v("The code below shows how to run the REopt API on a single Feature Report hash using this gem:")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string-literal"}},[e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'urbanopt/reopt'")])]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEVELOPER_NREL_KEY")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string-literal"}},[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# <insert a valid API key from https://developer.nrel.gov/signup >")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Load a Feature Report Hash")]),t._v("\nfeature_reports_hash "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# <insert a valid Feature Report hash here with latitude and longitude filled in>")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Create a Feature Report")]),t._v("\nfeature_report "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" URBANopt"),e("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Reporting"),e("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("DefaultReports"),e("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FeatureReport")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("feature_reports_hash"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Specify a file name where REopt Lite results will be written in JSON format")]),t._v("\nreopt_output_file "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("File")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("feature_report"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("directory_name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string-literal"}},[e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'feature_report_reopt_run.json'")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Specify a file name where the new timeseries CSV will be written after REopt Lite has determined cost optimal dispatch")]),t._v("\ntimeseries_output_file "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("File")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("feature_report"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("directory_name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string-literal"}},[e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'feature_report_timeseries.csv'")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Specify non-default REopt Lite assumptions, saved in JSON format, to be used in calling the API")]),t._v("\nreopt_assumptions_file "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("File")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("File")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dirname"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__FILE__"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string-literal"}},[e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../files/reopt_assumptions_basic.json'")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Create a REopt Lite Post Processor to call the API, note you will need a Developer.nrel.gov API key in this step")]),t._v("\nreopt_post_processor "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" URBANopt"),e("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("REopt"),e("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("REoptPostProcessor")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("nil")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("nil")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("nil")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEVELOPER_NREL_KEY")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Call REopt Lite with the post processor to update the feature's distributed generation attributes and timeseries CSV.")]),t._v("\nupdated_feature_report "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" reopt_post_processor"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("run_feature_report"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("feature_report"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("reopt_assumptions_file"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("reopt_output_file"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("timeseries_output_file"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])]),e("p",[t._v("More commonly, this gem can be used to run REopt a collection of features stored in a Scenario Report as show here:")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string-literal"}},[e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'urbanopt/reopt'")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEVELOPER_NREL_KEY")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string-literal"}},[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# <insert a valid API key from https://developer.nrel.gov/signup >")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Create a Scenario Report")]),t._v("\nscenario_report "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" URBANopt"),e("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Reporting"),e("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("DefaultReports"),e("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ScenarioReport")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":directory_name")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("File")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("File")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dirname"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__FILE__"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string-literal"}},[e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'run/example_scenario'")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":timeseries_csv")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":path")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("File")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("File")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dirname"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__FILE__"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string-literal"}},[e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'run/example_scenario/timeseries.csv'")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Load Feature Reports into the Scenario Report")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v(".2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("each")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("i"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n  feature_reports_path "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("File")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("File")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dirname"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__FILE__"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string-literal"}},[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"run/example_scenario/')]),e("span",{pre:!0,attrs:{class:"token interpolation"}},[e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("#{")]),e("span",{pre:!0,attrs:{class:"token content"}},[t._v("i")]),e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("}")])]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('/010_default_feature_reports/default_feature_reports.json"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  feature_reports_hash "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("nil")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("File")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("open"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("feature_reports_path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string-literal"}},[e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'r'")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("file"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n    feature_reports_hash "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("parse"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("file"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("read"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v("symbolize_names")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n  feature_report "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" URBANopt"),e("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Reporting"),e("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("DefaultReports"),e("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FeatureReport")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("feature_reports_hash"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  feature_report_dir "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("File")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("File")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dirname"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__FILE__"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string-literal"}},[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"run/example_scenario/')]),e("span",{pre:!0,attrs:{class:"token interpolation"}},[e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("#{")]),e("span",{pre:!0,attrs:{class:"token content"}},[t._v("i")]),e("span",{pre:!0,attrs:{class:"token delimiter punctuation"}},[t._v("}")])]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  feature_report"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("directory_name "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" feature_report_dir\n\n  scenario_report"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add_feature_report"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("feature_report"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Specify non-default REopt Lite assumptions, saved in JSON format, to be used in calling the API")]),t._v("\nreopt_assumptions_file "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("File")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("File")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dirname"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__FILE__"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string-literal"}},[e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'files/reopt_assumptions_basic.json'")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Create a REopt Lite Post Processor to call the API, note you will need a Developer.nrel.gov API key in this step")]),t._v("\nreopt_post_processor "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" URBANopt"),e("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("REopt"),e("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("REoptPostProcessor")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("scenario_report"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reopt_assumptions_file"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("nil")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEVELOPER_NREL_KEY")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Call REopt Lite with the post processor once on the sceanrio's aggregated load to update the scenario's distributed generation attributes and timeseries CSV.")]),t._v("\nupdated_scenario_report "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" reopt_post_processor"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("run_scenario_report"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("scenario_report"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])]),e("h2",{attrs:{id:"testing"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#testing"}},[t._v("#")]),t._v(" Testing")]),t._v(" "),e("p",[t._v("First, check out the repository (i.e. git clone this repo).")]),t._v(" "),e("p",[t._v("Next, obtain a developer.nrel.gov API key from the "),e("a",{attrs:{href:"https://developer.nrel.gov/%5D",target:"_blank",rel:"noopener noreferrer"}},[t._v("NREL Developer Network"),e("OutboundLink")],1),t._v(". Copy and paste your key in to the "),e("em",[t._v("developer_nrel_key")]),t._v("."),e("em",[t._v("rb")]),t._v(" file then save the file:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v("DEVELOPER_NREL_KEY = '<insert your key here>'\n")])])]),e("p",[t._v("Finally, execute:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v("$ bundle install\n$ bundle update\n$ bundle exec rake\n")])])]),e("h2",{attrs:{id:"releasing"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#releasing"}},[t._v("#")]),t._v(" Releasing")]),t._v(" "),e("ul",[e("li",[t._v("Update change log")]),t._v(" "),e("li",[t._v("Update version in "),e("code",[t._v("/lib/urbanopt/reopt/version.rb")])]),t._v(" "),e("li",[t._v("Merge down to master")]),t._v(" "),e("li",[t._v("run "),e("code",[t._v("rake release")]),t._v(" from master")])])],1)}),[],!1,null,null,null);e.default=n.exports}}]);